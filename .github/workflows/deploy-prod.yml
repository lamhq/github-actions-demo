name: Deploy to Production
on:
  workflow_dispatch:
    inputs:
      commit:
        description: 'Commit hash'
        required: true
        default: 'HEAD'

jobs:
  deploy_to_production:
    name: Deploy to Production
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
        with:
          fetch-depth: 0

      - name: Checkout to specified commit
        run: git checkout ${{ github.event.inputs.commit }}

      - name: Print current commit
        run: git status
   
      - name: Get current version
        id: npm_package_version
        uses: Saionaro/extract-package-version@v1.0.6   

      - name: Print version
        run: echo ${{ steps.npm_package_version.outputs.version }}        